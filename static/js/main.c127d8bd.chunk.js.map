{"version":3,"sources":["AddFriend.tsx","utils/index.ts","Planner.tsx","Picker.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["AddFriend","props","_useState","useState","_useState2","Object","slicedToArray","friendCode","setFriendCode","react_default","a","createElement","className","concat","placeholder","value","onChange","e","currentTarget","type","disabled","onClick","addUser","getSets","_ref","asyncToGenerator","regenerator_default","mark","_callee","response","data","sets","wrap","_context","prev","next","fetch","sent","json","abrupt","stop","apply","this","arguments","decodeShare","compressed","choices","decompress","split","filter","x","name","ids","slice","map","parseInt","formatDate","date","format","Planner","friendsAndSets","values","R","setIds","friend","id","flat","friendsAndSetsBySetId","toString","friendsBySetId","fas","setsByArtist","title","allSets","friends","set","find","setGroup","objectSpread","setNumber","findIndex","totalSetCount","length","setsByTime","startTime","valueOf","setsByDay","_ref2","zero","Date","addDays","differenceInDays","esm","defaultIndex","forceRenderTabPanel","keys","day","key","i","endTime","stage","join","Picker","currentStages","setStage","selectedStages","stages","s","stageSets","artists","dist_default","multiple","includeFilter","options","v","App","isLoading","setLoading","_useState3","_useState4","myName","setMyName","_useState5","_useState6","mySelection","setMySelection","_useState7","_useState8","myCode","setMyCode","_useState9","_useState10","setAllSets","_useState11","_useState12","friendArtists","setFriendArtists","useEffect","me","URLSearchParams","window","location","search","get","defineProperty","artist","encoded","toConsumableArray","joined","console","log","compress","encodeShare","params","history","pushState","chosenSets","chosenArtists","AddFriend_AddFriend","code","Picker_Picker","selection","Planner_Planner","Boolean","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c127d8bd.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\n\r\ninterface Props {\r\n  addUser: (code: string) => void;\r\n  className?: string;\r\n}\r\n\r\nexport const AddFriend = (props: Props) => {\r\n  const [friendCode, setFriendCode] = useState<string>();\r\n\r\n  return (\r\n    <div className={`field field-add-friend ${props.className || \"\"}`}>\r\n      <label>Add a friend</label>\r\n      <div className=\"field-add-friend__inputs\">\r\n        <input\r\n          placeholder=\"Code\"\r\n          value={friendCode}\r\n          onChange={e => setFriendCode(e.currentTarget.value)}\r\n        />\r\n\r\n        <button\r\n          type=\"button\"\r\n          disabled={!friendCode}\r\n          onClick={() => props.addUser(friendCode!)}\r\n        >\r\n          Add\r\n          </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\r\nimport { ISet } from \"../../data/scraper\";\r\nimport { decompressFromEncodedURIComponent as decompress, compressToEncodedURIComponent as compress } from \"lz-string\";\r\n\r\n/**\r\n * Load sets from sets.json\r\n */\r\nexport const getSets = async (): Promise<ISet[]> => {\r\n  const response = await fetch(\"./sets.json\");\r\n  const data = await response.json();\r\n  const sets = data.sets as ISet[];\r\n  return sets;\r\n}\r\n\r\nexport const decodeShare = (compressed: string): { name: string, ids: number[] } => {\r\n  const choices = (decompress(compressed) || \"\").split(\";\").filter(x => !!x);\r\n  const name = choices[0];\r\n  const ids = choices.slice(1).map(x => parseInt(x));\r\n\r\n  return { name, ids };\r\n}\r\n\r\nexport const encodeShare = (name: string, ids: number[]): string => {\r\n  const data = [name, ...ids];\r\n  const joined = data.join(\";\");\r\n  console.log(joined);\r\n\r\n  const value = data.length ? compress(joined) : \"\";\r\n  return value;\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Tabs, TabList, Tab, TabPanel } from \"react-tabs\";\r\nimport * as R from \"ramda\";\r\nimport { format, differenceInDays, addDays } from \"date-fns\";\r\nimport { ISet } from \"../data/scraper\";\r\n\r\ninterface OwnProps {\r\n  sets: ISet[];\r\n  choices: Record<string, number[]>;\r\n}\r\n\r\ninterface ISetInfo extends ISet {\r\n  setNumber: number;\r\n  totalSetCount: number;\r\n  friends: string[];\r\n}\r\n\r\nconst formatDate = (date: Date | null): string => date ? format(date, \"ddd HH:mm\") : \"TBA\";\r\n\r\nexport const Planner = ({ choices, sets }: OwnProps) => {\r\n\r\n  // Such efficiency\r\n  const friendsAndSets = Object.values(R.mapObjIndexed((setIds, friend) => setIds.map(id => ({ id, friend })), choices)).flat();\r\n  const friendsAndSetsBySetId = R.groupBy(x => x.id.toString(), friendsAndSets);\r\n  const friendsBySetId = R.mapObjIndexed(fas => fas.map(x => x.friend), friendsAndSetsBySetId);\r\n  const setsByArtist = R.groupBy(x => x.title, sets);\r\n  const allSets = R.mapObjIndexed((friends, id) => {\r\n    const set = sets.find(x => x.id == parseInt(id))!;\r\n    const setGroup = setsByArtist[set.title];\r\n\r\n    return {\r\n      ...set,\r\n      setNumber: setGroup.findIndex(x => x.id == set.id) + 1,\r\n      totalSetCount: setGroup.length,\r\n      friends,\r\n    } as ISetInfo;\r\n  }, friendsBySetId);\r\n\r\n  const setsByTime = R.sortBy(x => x.startTime ? x.startTime.valueOf() : -1, R.values(allSets).flat());\r\n  const setsByDay = R.groupBy(({ startTime }) => {\r\n    // Number of full days between day 0 (Weds 26th @ 5am)\r\n    const zero = new Date(2019, 5, 26, 5, 0);\r\n    return (startTime\r\n      ? format(addDays(zero, differenceInDays(startTime, zero)), \"ddd\")\r\n      : \"TBA\");\r\n  }, setsByTime)\r\n\r\n  return (\r\n    <div className=\"schedule\">\r\n      <h3>Schedule</h3>\r\n      <Tabs defaultIndex={0} forceRenderTabPanel>\r\n        <TabList>\r\n          {Object.keys(setsByDay).map(day => <Tab key={`tab-${day}`}>{day}</Tab>)}\r\n        </TabList>\r\n\r\n        {Object.keys(setsByDay).map(day => {\r\n          const sets = setsByDay[day];\r\n          return (\r\n            <TabPanel key={`sets-${day}`}>\r\n              {sets.map((set, i) => (\r\n                <div key={i}>\r\n                  <h3>{set.title} ({set.setNumber}/{set.totalSetCount})</h3>\r\n                  <p>{formatDate(set.startTime)} - {formatDate(set.endTime)}</p>\r\n                  <p>{set.stage}</p>\r\n                  <p>{set.friends.join(\", \")}</p>\r\n                </div>\r\n              ))}\r\n            </TabPanel>\r\n          );\r\n        })}\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport Picky, { PickyValue } from \"react-picky\";\r\nimport * as R from \"ramda\";\r\nimport { ISet } from \"../data/scraper\";\r\n\r\ninterface OwnProps {\r\n  sets: ISet[];\r\n  value: string[];\r\n  onChange: (x: PickyValue) => void;\r\n}\r\n\r\nexport const Picker = ({ sets, value, onChange }: OwnProps) => {\r\n  const [currentStages, setStage] = useState<string[]>([]);\r\n\r\n  const selectedStages = currentStages.filter(x => !!x);\r\n  const stages = R.sortBy(x => x, R.uniq(sets.map(s => s.stage)));\r\n  const stageSets = sets.filter(set => !selectedStages.length || R.contains(set.stage, selectedStages));\r\n  const artists = R.sortBy(x => x, R.uniq(stageSets.map(set => set.title)));\r\n\r\n  return (\r\n    <div className=\"picker\">\r\n      <h3>Stages <a onClick={() => setStage([])}>âœ–</a></h3>\r\n      <Picky\r\n        className=\"picker__stages\"\r\n        multiple\r\n        includeFilter\r\n        options={stages}\r\n        value={currentStages}\r\n        onChange={v => setStage(v as string[])}\r\n      />\r\n\r\n      <h3>Artists</h3>\r\n      <Picky\r\n        className=\"picker__artists\"\r\n        multiple\r\n        includeFilter\r\n        options={artists}\r\n        value={value}\r\n        onChange={onChange}\r\n      />\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport * as R from \"ramda\";\r\nimport { AddFriend } from './AddFriend';\r\nimport { ISet } from '../data/scraper';\r\nimport { getSets, decodeShare, encodeShare } from './utils';\r\nimport { Planner } from './Planner';\r\nimport { Picker } from './Picker';\r\n\r\nimport './App.scss';\r\nimport \"react-calendar-timeline/lib/Timeline.css\";\r\nimport \"react-picky/dist/picky.css\";\r\n\r\nconst App: React.FC = () => {\r\n  const [isLoading, setLoading] = useState<boolean>(true);\r\n  const [myName, setMyName] = useState<string>(\"me\");\r\n  const [mySelection, setMySelection] = useState<string[]>([]);\r\n  const [myCode, setMyCode] = useState<string>(\"\");\r\n  const [allSets, setAllSets] = useState<ISet[]>([]);\r\n  const [friendArtists, setFriendArtists] = useState<Record<string, number[]>>({});\r\n\r\n  // Load set data\r\n  useEffect(() => {\r\n    setLoading(true);\r\n\r\n    (async () => {\r\n      const sets = await getSets();\r\n\r\n      setAllSets(sets);\r\n      setLoading(false);\r\n    })();\r\n  }, []);\r\n\r\n  // Initialise selection from query string\r\n  useEffect(() => {\r\n    const me = decodeShare(new URLSearchParams(window.location.search).get(\"a\") || \"\");\r\n    setFriendArtists({ ...friendArtists, [me.name]: me.ids });\r\n  }, []);\r\n\r\n  // Update qs when name or sets change\r\n  useEffect(() => {\r\n    const choices = mySelection.filter(x => !!x);\r\n    const sets = R.innerJoin((set, artist) => set.title == artist, Object.values(allSets).flat(), choices);\r\n    const setIds = sets.map(x => x.id);\r\n\r\n    const encoded = encodeShare(myName, setIds);\r\n    setMyCode(encoded);\r\n\r\n    const params = new URLSearchParams(window.location.search);\r\n    params.set(\"a\", encoded);\r\n    window.history.pushState(\"\", \"\", \"?\" + params.toString());\r\n\r\n    setFriendArtists({ ...friendArtists, me: setIds });\r\n  }, [mySelection, myName]);\r\n\r\n  const chosenSets = R.innerJoin((set, id) => set.id == id, Object.values(allSets).flat(), friendArtists.me || []);\r\n  const chosenArtists = R.uniq(chosenSets.map(x => x.title));\r\n\r\n  return (\r\n    <div className=\"planner\">\r\n      {isLoading &&\r\n        <div className=\"planner__loading\">\r\n          <div>Loading...</div>\r\n        </div>\r\n      }\r\n\r\n      <div className=\"columns planner__share is-marginless\">\r\n        <div className=\"field field-my-name column\">\r\n          <label>What's yer name?</label>\r\n          <div>\r\n            <input\r\n              type=\"text\"\r\n              value={myName}\r\n              onChange={e => setMyName(e.currentTarget.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"field field-my-name column\">\r\n          <label>Your share code</label>\r\n          <div>\r\n            <input type=\"text\" value={myCode} />\r\n          </div>\r\n        </div>\r\n\r\n        <AddFriend\r\n          className=\"column\"\r\n          addUser={(code) => {\r\n            const choices = decodeShare(code);\r\n            setFriendArtists({ ...friendArtists, [choices.name]: choices.ids });\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"columns\">\r\n        <div className=\"column is-half-tablet is-full-mobile\">\r\n          <Picker\r\n            sets={allSets}\r\n            value={chosenArtists || []}\r\n            onChange={selection => setMySelection(selection as string[])}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"column is-half-tablet is-full-mobile\">\r\n          <Planner sets={allSets} choices={friendArtists} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}